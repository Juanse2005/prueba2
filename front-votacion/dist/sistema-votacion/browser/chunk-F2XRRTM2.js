import{a as A}from"./chunk-XPYVCOT5.js";import{a as I}from"./chunk-Y3RCPZZP.js";import{a as N,c as G,d as z,g as K,h as Q}from"./chunk-ZLLD3L34.js";import{D as S,F as _,Ga as P,H as n,Ha as V,I as i,J as E,K as j,Ka as O,L as y,La as L,M as v,Ma as D,Na as U,O as F,Oa as B,P as s,Pa as q,Qa as R,R as x,S as f,T as b,U as h,Wa as J,ab as H,ea as T,ia as W,l as w,p as k,q as M,r as p,s as u,x as c,y as C}from"./chunk-ZHU3U647.js";function $(a,t){a&1&&(n(0,"div",29),s(1," Nombre de la asamblea es obligatorio. "),i())}function ee(a,t){if(a&1&&(n(0,"div",30),s(1),i()),a&2){let g=v();c(),x(" Archivo seleccionado: ",g.selectedFileName," ")}}function te(a,t){if(a&1&&(n(0,"div",29),s(1),i()),a&2){let g=v();c(),x(" Es obligatorio seleccionar un archivo ",g.errorFile," ")}}function ie(a,t){if(a&1){let g=j();n(0,"div",8)(1,"div",9)(2,"label",31),s(3,"Latitud"),i(),n(4,"input",32),h("ngModelChange",function(o){p(g);let e=v();return b(e.asamblea.latitud,o)||(e.asamblea.latitud=o),u(o)}),i()(),n(5,"div",9)(6,"label",33),s(7,"Longitud"),i(),n(8,"input",34),h("ngModelChange",function(o){p(g);let e=v();return b(e.asamblea.longitud,o)||(e.asamblea.longitud=o),u(o)}),i()()()}if(a&2){let g=v();c(4),f("ngModel",g.asamblea.latitud),c(4),f("ngModel",g.asamblea.longitud)}}var Y=(()=>{let t=class t{constructor(l,o,e,m){this.router=l,this.asambleaService=o,this.modalService=e,this.adminConjuntoService=m,this.nombre="",this.asamblea={},this.activarUbicacion=!1,this.adminConjuntos=[],this.admin={},this.conjunto={},this.selectedFile=null,this.selectedFileName="",this.fileTouched=!1,this.errorFile=""}ngOnInit(){let o=JSON.parse(localStorage.getItem("currentUser")??"{}").id_admin||"Usuario desconocido";this.admin.id_admin=o,this.adminConjuntoService.getById(N.getAllAdminConjuntos,o).subscribe(r=>{this.adminConjuntos=r.respuesta||[]});let e=JSON.parse(localStorage.getItem("conjunto")??"{}");this.conjunto.nombre=e.nombre_conjunto;let d=JSON.parse(localStorage.getItem("conjunto")??"{}").id_conjunto;this.asamblea.id_conjunto=d}openInviteModal(){this.modalService.open(K,{ariaLabelledBy:"modal-basic-title"})}openFileDialog(){let l=document.createElement("input");l.type="file",l.accept=".xlsx",l.style.display="none",l.addEventListener("change",o=>{let e=o.target.files?.[0];e&&(e.name.split(".").pop()?.toLowerCase()==="xlsx"?(this.selectedFile=e,this.selectedFileName=e.name,console.log("Archivo seleccionado:",e.name)):this.errorFile="Solo se permiten archivos con extensi\xF3n .xlsx")}),document.body.appendChild(l),l.click(),document.body.removeChild(l)}saveAsamblea(){this.fileTouched=!0,this.selectedFile?this.asambleaService.post(N.createAsamblea,this.asamblea).subscribe({next:l=>{this.router.navigate(["/asambleas"])},error:l=>{l.status===401?this.router.navigate(["/login"]):console.error("Error no manejado:",l)}}):console.log("Tiene que agregar archivo de invitacion")}volver(){this.router.navigate(["/asambleas"])}};t.\u0275fac=function(o){return new(o||t)(C(P),C(I),C(H),C(A))},t.\u0275cmp=k({type:t,selectors:[["app-creacion-asamblea"]],decls:52,vars:11,consts:[["asambleaForm","ngForm"],["tituloInput","ngModel"],[1,"container"],[1,"abs-center"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"text-center","fs-2","text-primary","mb-4"],[3,"ngSubmit"],[1,"row","mb-4"],[1,"col"],["for","assemblyName",1,"form-label"],["type","text","id","titulo","name","titulo","required","","placeholder","Nombre asamblea","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["for","description",1,"form-label"],["id","descripcion","name","descripcion","placeholder","Ingrese la descripci\xF3n","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fecha_inicio",1,"form-label"],["type","datetime-local","id","fecha_inicio","name","fecha_inicio","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fecha_fin",1,"form-label"],["type","datetime-local","id","fecha_fin","name","fecha_fin","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","flexSwitchCheckReverse",1,"form-label","d-block"],[1,"form-check","form-switch","d-inline-block"],["type","checkbox","id","flexSwitchCheckReverse","name","activarUbicacion",1,"form-check-input",2,"width","4rem","height","2rem",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success","w-100","mt-4","fixed-height",3,"click"],["class","text-success ",4,"ngIf"],["type","button",1,"btn","btn-primary","w-100","mt-4","fixed-height",3,"click"],["class","row mb-4",4,"ngIf"],[1,"row","mt-3"],["type","submit",1,"btn","btn-primary","me-2","w-100","w-md-auto",3,"disabled"],["type","button",1,"btn","btn-secondary","w-100","w-md-auto",3,"click"],[1,"text-danger"],[1,"text-success"],["for","latitud",1,"form-label"],["type","text","id","latitud","name","latitud","placeholder","Ingrese la latitud",1,"form-control",3,"ngModelChange","ngModel"],["for","longitud",1,"form-label"],["type","text","id","longitud","name","longitud","placeholder","Ingrese la longitud",1,"form-control",3,"ngModelChange","ngModel"]],template:function(o,e){if(o&1){let m=j();E(0,"app-nav"),n(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h2",6),s(6),i(),n(7,"form",7,0),y("ngSubmit",function(){return p(m),u(e.saveAsamblea())}),n(9,"div",8)(10,"div",9)(11,"label",10),s(12,"Nombre de la Asamblea"),i(),n(13,"input",11,1),h("ngModelChange",function(r){return p(m),b(e.asamblea.titulo,r)||(e.asamblea.titulo=r),u(r)}),i(),S(15,$,2,0,"div",12),i()(),n(16,"div",8)(17,"div",9)(18,"label",13),s(19,"Descripci\xF3n"),i(),n(20,"textarea",14),h("ngModelChange",function(r){return p(m),b(e.asamblea.descripcion,r)||(e.asamblea.descripcion=r),u(r)}),i()()(),n(21,"div",8)(22,"div",9)(23,"label",15),s(24,"Fecha de Inicio"),i(),n(25,"input",16),h("ngModelChange",function(r){return p(m),b(e.asamblea.fecha_inicio,r)||(e.asamblea.fecha_inicio=r),u(r)}),i()(),n(26,"div",9)(27,"label",17),s(28,"Fecha de Fin"),i(),n(29,"input",18),h("ngModelChange",function(r){return p(m),b(e.asamblea.fecha_fin,r)||(e.asamblea.fecha_fin=r),u(r)}),i()(),n(30,"div",9)(31,"label",19),s(32,"Activar ubicaci\xF3n"),i(),n(33,"div",20)(34,"input",21),h("ngModelChange",function(r){return p(m),b(e.activarUbicacion,r)||(e.activarUbicacion=r),u(r)}),i()()(),n(35,"div",9)(36,"button",22),y("click",function(){return p(m),u(e.openFileDialog())}),s(37," Invitar a asamblea "),i(),S(38,ee,2,1,"div",23)(39,te,2,1,"div",12),i(),n(40,"div",9)(41,"button",24),y("click",function(){return p(m),u(e.openInviteModal())}),s(42," Archivo de invitaci\xF3n "),i()()(),S(43,ie,9,2,"div",25),n(44,"div",26)(45,"div",9)(46,"button",27),s(47," Crear Asamblea "),i()(),n(48,"div",9)(49,"button",28),y("click",function(){return p(m),u(e.volver())}),s(50," Volver "),i()()()()()()()(),E(51,"app-footer")}if(o&2){let m=F(8),d=F(14);c(6),x("Crear Asamblea Para ",e.conjunto.nombre,""),c(7),f("ngModel",e.asamblea.titulo),c(2),_("ngIf",d.invalid&&d.touched),c(5),f("ngModel",e.asamblea.descripcion),c(5),f("ngModel",e.asamblea.fecha_inicio),c(4),f("ngModel",e.asamblea.fecha_fin),c(5),f("ngModel",e.activarUbicacion),c(4),_("ngIf",e.selectedFileName),c(),_("ngIf",!e.selectedFileName&&e.fileTouched||e.errorFile),c(4),_("ngIf",e.activarUbicacion),c(3),_("disabled",m.invalid)}},dependencies:[T,R,L,O,D,U,J,q,B,G,z],styles:[".abs-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:70vh}.card[_ngcontent-%COMP%]{min-width:90vw}.container[_ngcontent-%COMP%]{padding:1rem}.fixed-height[_ngcontent-%COMP%]{height:3rem;padding:0 15px}.dp-hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}"]});let a=t;return a})();var ne=[{path:"",component:Y}],Z=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=M({type:t}),t.\u0275inj=w({imports:[V.forChild(ne),V]});let a=t;return a})();var xe=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=M({type:t}),t.\u0275inj=w({providers:[I,A],imports:[W,Z,Q]});let a=t;return a})();export{xe as CreacionAsambleaModule};
