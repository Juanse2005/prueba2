import{a as M}from"./chunk-OXAWYZPD.js";import{a as w,c as K,d as Q,h as X}from"./chunk-ZLLD3L34.js";import{D as f,Ea as x,F as s,Ga as O,H as a,Ha as N,I as o,J as E,K as T,L as I,La as P,Ma as B,Na as q,O as y,Oa as L,P as d,Pa as U,Q as S,Qa as k,Ra as R,S as C,T as v,Ta as z,U as _,Ua as J,Va as G,Wa as H,da as W,ea as F,ia as A,l as j,p as D,q as h,r as p,s as g,x as c,y as b}from"./chunk-ZHU3U647.js";function ee(r,t){if(r&1&&(a(0,"option",31),d(1),o()),r&2){let V=t.$implicit;s("value",V.tipo_documento),c(),S(V.tipo_documento)}}function oe(r,t){r&1&&(a(0,"div",32),d(1," El tipo de documento es obligatorio. "),o())}function te(r,t){r&1&&(a(0,"div",32),d(1," N\xFAmero de Documento es obligatorio. "),o())}function ne(r,t){r&1&&(a(0,"div",32),d(1," Nombre es obligatorio. "),o())}function ie(r,t){r&1&&(a(0,"div",32),d(1," Correo Electr\xF3nico es obligatorio. "),o())}function re(r,t){r&1&&(a(0,"div",32),d(1," Tel\xE9fono es obligatorio. "),o())}function le(r,t){r&1&&(a(0,"div",32),d(1," Direcci\xF3n es obligatoria. "),o())}function ae(r,t){r&1&&(a(0,"div",32),d(1," Cantidad de Apartamentos es obligatoria. "),o())}var Z=(()=>{let t=class t{constructor(m,l,n){this.router=m,this.route=l,this.conjuntoService=n,this.documentos=[],this.conjunto={},this.isEditMode=!1,this.titulo="Crear nuevo conjunto"}ngOnInit(){this.route.params.subscribe(u=>{this.id=+u.id,this.id&&(this.isEditMode=!0,this.titulo="Editar conjunto",this.getConjuntoById())});let l=JSON.parse(localStorage.getItem("currentUser")||"{}").nombre||"Usuario desconocido";this.conjunto.usuario_modificacion=l;let n=JSON.parse(localStorage.getItem("documentos")||"{}");this.documentos=n.respuesta;let e=new Date;this.conjunto.ultima_modificacion=e.toISOString().split("T")[0]}getConjuntoById(){this.id&&this.conjuntoService.getById(w.getAllConjuntos,this.id).subscribe(m=>{if(m&&m.respuesta&&m.respuesta.length>0){let l=m.respuesta[0];console.log("ID del Conjunto:",l.id_conjunto),console.log("Datos completos del Conjunto:",l),this.conjunto=l}else console.error("No se encontr\xF3 el administrador o la respuesta est\xE1 vac\xEDa")},m=>{console.error("Error al obtener el administrador:",m)})}saveConjunto(m){m.valid?this.id?this.conjuntoService.put(w.updateConjunto,this.id,this.conjunto).subscribe({next:l=>{console.log("Conjunto editado exitosamente:",l),this.router.navigate(["/conjuntos"])},error:l=>{console.error("Error al editar administrador:",l),l.status===401?(console.error("No autorizado, redirigiendo al login"),this.router.navigate(["/login"])):console.error("Error no manejado:",l)}}):this.conjuntoService.post(w.createConjunto,this.conjunto).subscribe({next:l=>{console.log("Administrador creado exitosamente:",l),m.reset(),this.router.navigate(["/conjuntos"])},error:l=>{console.error("Error al crear administrador:",l),l.status===401?(console.error("No autorizado, redirigiendo al login"),this.router.navigate(["/login"])):console.error("Error no manejado:",l)}}):console.log("Formulario inv\xE1lido")}volver(){this.router.navigate(["/conjuntos"])}};t.\u0275fac=function(l){return new(l||t)(b(O),b(x),b(M))},t.\u0275cmp=D({type:t,selectors:[["app-creacion-conjunto"]],decls:56,vars:19,consts:[["conjuntoForm","ngForm"],["tipoDocumento","ngModel"],[1,"container","py-3"],[1,"abs-center"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"text-center","fs-2","text-primary","mb-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6"],["for","tipoDocumento",1,"form-label"],["id","tipoDocumento","name","id_tipo_documento","required","",1,"form-select",3,"ngModelChange","ngModel"],["disabled","","selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["for","nroDocumento",1,"form-label"],["type","number","id","nroDocumento","name","nroDocumento","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","correo",1,"form-label"],["type","email","id","correo","name","correo","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","telefono",1,"form-label"],["type","number","id","telefono","name","telefono","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","direccion",1,"form-label"],["type","text","id","direccion","name","direccion","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","cantApartamentos",1,"form-label"],["type","number","id","cantApartamentos","name","cantApartamentos","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","mt-3"],[1,"col"],["type","submit",1,"btn","btn-primary","me-2","w-100","w-md-auto",3,"disabled"],["type","button",1,"btn","btn-secondary","w-100","w-md-auto",3,"click"],[3,"value"],[1,"text-danger"]],template:function(l,n){if(l&1){let e=T();E(0,"app-nav"),a(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h2",6),d(6),o(),a(7,"form",7,0),I("ngSubmit",function(){p(e);let i=y(8);return g(n.saveConjunto(i))}),a(9,"div",8)(10,"label",9),d(11,"Tipo de Documento"),o(),a(12,"select",10,1),_("ngModelChange",function(i){return p(e),v(n.conjunto.id_tipo_documento,i)||(n.conjunto.id_tipo_documento=i),g(i)}),a(14,"option",11),d(15,"Seleccione un tipo de documento"),o(),f(16,ee,2,2,"option",12),o(),f(17,oe,2,0,"div",13),o(),a(18,"div",8)(19,"label",14),d(20,"N\xFAmero de Documento"),o(),a(21,"input",15),_("ngModelChange",function(i){return p(e),v(n.conjunto.nro_documento,i)||(n.conjunto.nro_documento=i),g(i)}),o(),f(22,te,2,0,"div",13),o(),a(23,"div",16)(24,"label",17),d(25,"Nombre"),o(),a(26,"input",18),_("ngModelChange",function(i){return p(e),v(n.conjunto.nombre,i)||(n.conjunto.nombre=i),g(i)}),o(),f(27,ne,2,0,"div",13),o(),a(28,"div",16)(29,"label",19),d(30,"Correo Electr\xF3nico"),o(),a(31,"input",20),_("ngModelChange",function(i){return p(e),v(n.conjunto.correo,i)||(n.conjunto.correo=i),g(i)}),o(),f(32,ie,2,0,"div",13),o(),a(33,"div",8)(34,"label",21),d(35,"Tel\xE9fono"),o(),a(36,"input",22),_("ngModelChange",function(i){return p(e),v(n.conjunto.telefono,i)||(n.conjunto.telefono=i),g(i)}),o(),f(37,re,2,0,"div",13),o(),a(38,"div",8)(39,"label",23),d(40,"Direcci\xF3n"),o(),a(41,"input",24),_("ngModelChange",function(i){return p(e),v(n.conjunto.direccion,i)||(n.conjunto.direccion=i),g(i)}),o(),f(42,le,2,0,"div",13),o(),a(43,"div",16)(44,"label",25),d(45,"Cantidad de Apartamentos"),o(),a(46,"input",26),_("ngModelChange",function(i){return p(e),v(n.conjunto.cant_apartamentos,i)||(n.conjunto.cant_apartamentos=i),g(i)}),o(),f(47,ae,2,0,"div",13),o(),a(48,"div",27)(49,"div",28)(50,"button",29),d(51),o()(),a(52,"div",28)(53,"button",30),I("click",function(){return p(e),g(n.volver())}),d(54,"Volver"),o()()()()()()()(),E(55,"app-footer")}if(l&2){let e=y(8),u=y(13);c(6),S(n.titulo),c(6),C("ngModel",n.conjunto.id_tipo_documento),c(2),s("value",null),c(2),s("ngForOf",n.documentos),c(),s("ngIf",u.invalid&&u.touched),c(4),C("ngModel",n.conjunto.nro_documento),c(),s("ngIf",(e.controls.nroDocumento==null?null:e.controls.nroDocumento.invalid)&&(e.controls.nroDocumento==null?null:e.controls.nroDocumento.touched)),c(4),C("ngModel",n.conjunto.nombre),c(),s("ngIf",(e.controls.nombre==null?null:e.controls.nombre.invalid)&&(e.controls.nombre==null?null:e.controls.nombre.touched)),c(4),C("ngModel",n.conjunto.correo),c(),s("ngIf",(e.controls.correo==null?null:e.controls.correo.invalid)&&(e.controls.correo==null?null:e.controls.correo.touched)),c(4),C("ngModel",n.conjunto.telefono),c(),s("ngIf",(e.controls.telefono==null?null:e.controls.telefono.invalid)&&(e.controls.telefono==null?null:e.controls.telefono.touched)),c(4),C("ngModel",n.conjunto.direccion),c(),s("ngIf",(e.controls.direccion==null?null:e.controls.direccion.invalid)&&(e.controls.direccion==null?null:e.controls.direccion.touched)),c(4),C("ngModel",n.conjunto.cant_apartamentos),c(),s("ngIf",(e.controls.cantApartamentos==null?null:e.controls.cantApartamentos.invalid)&&(e.controls.cantApartamentos==null?null:e.controls.cantApartamentos.touched)),c(3),s("disabled",e.invalid),c(),S(n.titulo)}},dependencies:[W,F,k,J,G,P,R,z,B,q,H,U,L,K,Q],styles:[".abs-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:70vh}.card[_ngcontent-%COMP%]{min-width:90vw}.container[_ngcontent-%COMP%]{padding:1rem}"]});let r=t;return r})();var ce=[{path:"",component:Z}],$=(()=>{let t=class t{};t.\u0275fac=function(l){return new(l||t)},t.\u0275mod=h({type:t}),t.\u0275inj=j({imports:[N.forChild(ce),N]});let r=t;return r})();var Ee=(()=>{let t=class t{};t.\u0275fac=function(l){return new(l||t)},t.\u0275mod=h({type:t}),t.\u0275inj=j({providers:[M],imports:[A,$,X]});let r=t;return r})();export{Ee as CreacionConjuntoModule};
