import{a as C}from"./chunk-KK3FQ2IU.js";import{a as N,c as k,d as R,h as z}from"./chunk-ZLLD3L34.js";import{D as f,Ea as x,F as p,Ga as T,H as s,Ha as I,I as o,J as E,K as U,L as M,La as W,Ma as P,Na as A,O as S,Oa as B,P as u,Pa as O,Qa as D,S as v,T as h,U as b,Wa as L,Ya as q,ea as V,ia as F,l as w,p as j,q as y,r as m,s as c,x as d,y as _}from"./chunk-ZHU3U647.js";function J(i,e){i&1&&(s(0,"div",21),u(1," Nombre es obligatorio. "),o())}function K(i,e){i&1&&(s(0,"div",21),u(1," El apartamento es obligatorio. "),o())}function Q(i,e){i&1&&(s(0,"div",21),u(1," Correo Electr\xF3nico es obligatorio. "),o())}function X(i,e){i&1&&(s(0,"div",21),u(1," La contrase\xF1a debe tener al menos 8 caracteres, una letra may\xFAscula, un n\xFAmero y un car\xE1cter especial. "),o())}var Z=(()=>{let e=class e{constructor(r,n,l){this.router=r,this.route=n,this.usuarioService=l,this.documentos=[],this.usuarios={}}ngOnInit(){this.route.params.subscribe(r=>{this.conjuntoId=+r.conjuntoId,this.userId=+r.userId}),this.conjuntoId&&this.getUsuariosById()}getUsuariosById(){this.conjuntoId&&this.usuarioService.getUsuarioById(N.getAllUsuarios,this.conjuntoId,this.userId).subscribe(r=>{if(console.log(r),r&&r.respuesta&&r.respuesta.length>0){let n=r.respuesta[0];this.usuarios=n}else console.error("No se encontr\xF3 el usuario o la respuesta est\xE1 vac\xEDa")},r=>{console.error("Error al obtener el usuario:",r)})}saveUsuario(r){r.valid&&this.userId?(this.usuarios.pass=this.usuarios.password??null,this.usuarioService.put(N.updateUsuario,this.userId,this.usuarios).subscribe({next:n=>{this.router.navigate(["/usuarios",this.conjuntoId])},error:n=>{console.error("Error al editar usuario:",n),n.status===401?(console.error("No autorizado, redirigiendo al login"),this.router.navigate(["/login"])):console.error("Error no manejado:",n)}})):console.log("Formulario inv\xE1lido")}volver(){this.router.navigate(["/usuarios",this.conjuntoId])}};e.\u0275fac=function(n){return new(n||e)(_(T),_(x),_(C))},e.\u0275cmp=j({type:e,selectors:[["app-edicion-usuario"]],decls:37,vars:9,consts:[["usuarioForm","ngForm"],[1,"container","py-3"],[1,"abs-center"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"text-center","fs-2","text-primary","mb-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-12"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["for","apartamento",1,"form-label"],["type","text","id","apartamento","name","apartamento","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","correo",1,"form-label"],["type","email","id","correo","name","correo","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","pattern","^(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()_+\\[\\]{};':\\\\|,.\\/?]).{8,}$",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","mt-3"],[1,"col"],["type","submit",1,"btn","btn-primary","me-2","w-100","w-md-auto",3,"disabled"],["type","button",1,"btn","btn-secondary","w-100","w-md-auto",3,"click"],[1,"text-danger"]],template:function(n,l){if(n&1){let t=U();E(0,"app-nav"),s(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),u(6,"Editar usuario"),o(),s(7,"form",6,0),M("ngSubmit",function(){m(t);let a=S(8);return c(l.saveUsuario(a))}),s(9,"div",7)(10,"label",8),u(11,"Nombre"),o(),s(12,"input",9),b("ngModelChange",function(a){return m(t),h(l.usuarios.nombre,a)||(l.usuarios.nombre=a),c(a)}),o(),f(13,J,2,0,"div",10),o(),s(14,"div",7)(15,"label",11),u(16,"Apartamento"),o(),s(17,"input",12),b("ngModelChange",function(a){return m(t),h(l.usuarios.apartamento,a)||(l.usuarios.apartamento=a),c(a)}),o(),f(18,K,2,0,"div",10),o(),s(19,"div",7)(20,"label",13),u(21,"Correo Electr\xF3nico"),o(),s(22,"input",14),b("ngModelChange",function(a){return m(t),h(l.usuarios.email,a)||(l.usuarios.email=a),c(a)}),o(),f(23,Q,2,0,"div",10),o(),s(24,"div",7)(25,"label",15),u(26,"Nueva contrase\xF1a"),o(),s(27,"input",16),b("ngModelChange",function(a){return m(t),h(l.usuarios.password,a)||(l.usuarios.password=a),c(a)}),o(),f(28,X,2,0,"div",10),o(),s(29,"div",17)(30,"div",18)(31,"button",19),u(32,"Editar usuario"),o()(),s(33,"div",18)(34,"button",20),M("click",function(){return m(t),c(l.volver())}),u(35,"Volver"),o()()()()()()()(),E(36,"app-footer")}if(n&2){let t=S(8);d(12),v("ngModel",l.usuarios.nombre),d(),p("ngIf",(t.controls.nombre==null?null:t.controls.nombre.invalid)&&(t.controls.nombre==null?null:t.controls.nombre.touched)),d(4),v("ngModel",l.usuarios.apartamento),d(),p("ngIf",(t.controls.apartamento==null?null:t.controls.apartamento.invalid)&&(t.controls.apartamento==null?null:t.controls.apartamento.touched)),d(4),v("ngModel",l.usuarios.email),d(),p("ngIf",(t.controls.correo==null?null:t.controls.correo.invalid)&&(t.controls.correo==null?null:t.controls.correo.touched)),d(4),v("ngModel",l.usuarios.password),d(),p("ngIf",(t.controls.password==null?null:t.controls.password.invalid)&&(t.controls.password==null?null:t.controls.password.touched)),d(3),p("disabled",t.invalid)}},dependencies:[V,D,W,P,A,L,q,O,B,k,R],styles:[".abs-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:70vh}.card[_ngcontent-%COMP%]{min-width:90vw}.container[_ngcontent-%COMP%]{padding:1rem}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let i=e;return i})();var Y=[{path:"",component:Z}],H=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e}),e.\u0275inj=w({imports:[I.forChild(Y),I]});let i=e;return i})();var ve=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e}),e.\u0275inj=w({providers:[C],imports:[F,H,z]});let i=e;return i})();export{ve as EdicionUsuarioModule};
