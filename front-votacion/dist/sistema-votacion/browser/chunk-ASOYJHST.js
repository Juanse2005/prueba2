import{a as x}from"./chunk-OXAWYZPD.js";import{a as T,c as D,d as L,e as U,h as q}from"./chunk-ZLLD3L34.js";import{D as S,F as d,Ga as O,H as t,Ha as w,I as n,J as b,K as N,L as g,La as P,M as f,Ma as B,P as o,Pa as W,Q as m,S as y,T as E,U as I,W as M,bb as R,ca as z,da as A,ea as F,ia as V,l as h,p as k,q as C,r as _,s as j,x as c,y as v}from"./chunk-ZHU3U647.js";var K=(s,i)=>({"btn-success":s,"btn-danger":i});function Q(s,i){s&1&&(t(0,"span",27),o(1," check"),n())}function X(s,i){s&1&&(t(0,"span",28),o(1," close"),n())}function Y(s,i){if(s&1){let l=N();t(0,"tr")(1,"th",19),o(2),n(),t(3,"td"),o(4),n(),t(5,"td"),o(6),n(),t(7,"td"),o(8),n(),t(9,"td"),o(10),n(),t(11,"td"),o(12),n(),t(13,"td"),o(14),n(),t(15,"td"),o(16),n(),t(17,"td"),o(18),n(),t(19,"td",20)(20,"button",21),g("click",function(){let e,a=_(l).$implicit,p=f();return j(p.editarConjunto((e=a.id_conjunto)!==null&&e!==void 0?e:0))}),t(21,"i",22),o(22,"edit"),n()(),t(23,"button",23),g("click",function(){let e=_(l).$implicit,a=f();return j(a.toggleEstado(e))}),S(24,Q,2,0,"span",24)(25,X,2,0,"span",25),n(),t(26,"button",26),g("click",function(){let e,a=_(l).$implicit,p=f();return j(p.VistaUsuarios((e=a.id_conjunto)!==null&&e!==void 0?e:0))}),t(27,"i",11),o(28,"group "),n()()()()}if(s&2){let l=i.$implicit,r=i.index,e=f();c(2),m((e.page-1)*e.pageSize+(r+1)),c(2),m(l.id_tipo_documento),c(2),m(l.nro_documento),c(2),m(l.nombre),c(2),m(l.correo),c(2),m(l.telefono),c(2),m(l.direccion),c(2),m(l.cant_apartamentos),c(2),m(l.estado),c(2),d("disabled",l.estado==="Inactivo"),c(3),d("ngClass",M(14,K,l.estado==="Activo",l.estado==="Inactivo"))("disabled",l.estado==="Inactivo"),c(),d("ngIf",l.estado==="Activo"),c(),d("ngIf",l.estado==="Inactivo")}}function Z(s,i){s&1&&(t(0,"tr")(1,"td",29),o(2,"No se encontraron conjuntos."),n()())}var H=(()=>{let i=class i{constructor(r,e){this.router=r,this.conjuntoService=e,this.page=1,this.pageSize=6,this.totalConjuntos=0,this.conjuntos=[],this.filteredConjuntos=[],this.searchConjunto=""}ngOnInit(){this.refreshConjuntos()}crearConjunto(){this.router.navigate(["/conjuntos/creacion-conjunto"])}editarConjunto(r){this.router.navigate(["/conjuntos/creacion-conjunto",r])}VistaUsuarios(r){this.router.navigate(["/usuarios",r])}refreshConjuntos(){this.conjuntoService.get(T.getAllConjuntos).subscribe(r=>{Array.isArray(r.respuesta)?this.conjuntos=r.respuesta:this.conjuntos=[],this.totalConjuntos=this.conjuntos.length,this.filterConjuntos()})}filterConjuntos(){let r=this.searchConjunto.toLowerCase();this.filteredConjuntos=this.conjuntos.filter(a=>a.nombre.toLowerCase().includes(r)||a.nro_documento.includes(r)),this.totalConjuntos=this.filteredConjuntos.length;let e=(this.page-1)*this.pageSize;this.filteredConjuntos=this.filteredConjuntos.slice(e,e+this.pageSize)}trackById(r,e){return e.id_conjunto??r}onSearchTermChange(){this.page=1,this.filterConjuntos()}toggleEstado(r){r.estado=r.estado==="Activo"?"Inactivo":"Activo",this.conjuntoService.delete(T.deleteConjunto,r.id_conjunto,r).subscribe({next:e=>{console.log("Estado del conjunto actualizado exitosamente:")},error:e=>{console.error("Error al actualizar el estado del conjunto:",e),e.status===401?console.error("No autorizado, redirigiendo al login"):console.error("Error no manejado:",e)}})}};i.\u0275fac=function(e){return new(e||i)(v(O),v(x))},i.\u0275cmp=k({type:i,selectors:[["app-conjuntos"]],decls:48,vars:7,consts:[[1,"container","py-3"],[1,"abs-center"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"text-center","fs-2","text-primary","mb-4"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-md-center","mb-3"],["type","button",1,"btn","btn-success","mb-3",3,"click"],[1,"material-icons","align-middle","me-1"],[1,"input-group","w-auto"],["type","text","placeholder","Buscar conjunto...",1,"form-control",3,"ngModelChange","input","ngModel"],["id","basic-addon1",1,"input-group-text"],[1,"material-icons"],[1,"table-responsive"],[1,"table","table-striped","text-center"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"d-flex","justify-content-between","p-2"],[3,"pageChange","collectionSize","page","pageSize"],["scope","row"],[1,"d-flex","justify-content-start"],["title","Editar",1,"btn","btn-warning",2,"font-size","20px","margin-right","5px",3,"click","disabled"],[1,"material-icons","align-middle",2,"font-size","20px","margin-right","5px"],[1,"btn",2,"font-size","20px","margin-right","5px",3,"click","ngClass","disabled"],["class","material-icons","title","Activo",4,"ngIf"],["class","material-icons","title","Inactivo",4,"ngIf"],["title","Usuarios",1,"btn","btn-primary",3,"click"],["title","Activo",1,"material-icons"],["title","Inactivo",1,"material-icons"],["colspan","10",2,"text-align","center"]],template:function(e,a){e&1&&(b(0,"app-animation")(1,"app-nav"),t(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"h2",4),o(7,"Conjuntos"),n(),t(8,"div",5)(9,"button",6),g("click",function(){return a.crearConjunto()}),t(10,"i",7),o(11,"add_circle "),n(),o(12," Crear nuevo conjunto"),n(),t(13,"div",8)(14,"input",9),I("ngModelChange",function(u){return E(a.searchConjunto,u)||(a.searchConjunto=u),u}),g("input",function(){return a.onSearchTermChange()}),n(),t(15,"span",10)(16,"i",11),o(17,"search"),n()()()(),t(18,"div",12)(19,"table",13)(20,"thead")(21,"tr")(22,"th",14),o(23,"#"),n(),t(24,"th",14),o(25,"Tipo documento"),n(),t(26,"th",14),o(27,"Numero de documento"),n(),t(28,"th",14),o(29,"Nombre"),n(),t(30,"th",14),o(31,"Correo"),n(),t(32,"th",14),o(33,"Telefono"),n(),t(34,"th",14),o(35,"Direccion"),n(),t(36,"th",14),o(37,"Apartamentos"),n(),t(38,"th",14),o(39,"Estado"),n(),t(40,"th",14),o(41,"Acciones"),n()()(),t(42,"tbody"),S(43,Y,29,17,"tr",15)(44,Z,3,0,"tr",16),n()()(),t(45,"div",17)(46,"ngb-pagination",18),I("pageChange",function(u){return E(a.page,u)||(a.page=u),u}),g("pageChange",function(){return a.refreshConjuntos()}),n()()()()()(),b(47,"app-footer")),e&2&&(c(14),y("ngModel",a.searchConjunto),c(29),d("ngForOf",a.filteredConjuntos)("ngForTrackBy",a.trackById),c(),d("ngIf",a.filteredConjuntos.length===0),c(2),d("collectionSize",a.totalConjuntos),y("page",a.page),d("pageSize",a.pageSize))},dependencies:[z,A,F,P,B,W,D,L,U,R],styles:[".abs-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:70vh}.card[_ngcontent-%COMP%]{min-width:90vw}.container[_ngcontent-%COMP%]{padding:1rem}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let s=i;return s})();var $=[{path:"",component:H}],J=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=C({type:i}),i.\u0275inj=h({imports:[w.forChild($),w]});let s=i;return s})();var jt=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=C({type:i}),i.\u0275inj=h({providers:[x],imports:[V,J,q]});let s=i;return s})();export{jt as ConjuntosModule};
