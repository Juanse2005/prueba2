import{a as v}from"./chunk-C2IP46QI.js";import{a as T,c as q,d as G,e as H,h as K}from"./chunk-ZLLD3L34.js";import{$ as O,D as f,E as M,F as l,Ga as D,H as e,Ha as j,I as t,J as b,K as k,L as u,La as L,M as _,Ma as R,O as z,P as n,Pa as $,Q as p,R as A,S as E,T as I,U as w,W as F,bb as J,ca as P,da as B,ea as V,ia as W,l as h,p as N,q as x,r as C,s as S,x as m,y}from"./chunk-ZHU3U647.js";var Y=(o,i)=>({"btn-success":o,"btn-danger":i});function Z(o,i){if(o&1&&(e(0,"li"),n(1),t()),o&2){let s=i.$implicit;m(),A("",s," ")}}function ee(o,i){if(o&1&&(e(0,"ol"),f(1,Z,2,1,"li",39),t()),o&2){let s=_().$implicit;m(),l("ngForOf",s.nombre_conjunto)}}function te(o,i){o&1&&(e(0,"p"),n(1,"No hay conjuntos asignados."),t())}function ie(o,i){o&1&&(e(0,"span",40),n(1,"check"),t())}function ne(o,i){o&1&&(e(0,"span",41),n(1,"close"),t())}function oe(o,i){if(o&1){let s=k();e(0,"tr")(1,"th",20),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),t(),e(7,"td"),n(8),t(),e(9,"td"),n(10),t(),e(11,"td"),n(12),t(),e(13,"td",21)(14,"button",22),n(15," Ver Conjuntos "),t(),e(16,"div",23)(17,"div",24)(18,"div",25)(19,"div",26)(20,"h5",27),n(21),t(),b(22,"button",28),t(),e(23,"div",29),f(24,ee,2,1,"ol",30)(25,te,2,0,"ng-template",null,0,O),t(),e(27,"div",31)(28,"button",32),n(29,"Cerrar"),t()()()()()(),e(30,"td"),n(31),t(),e(32,"td"),n(33),t(),e(34,"td",33)(35,"button",34),u("click",function(){let r,d=C(s).$implicit,c=_();return S(c.editarAdmin((r=d.id_admin)!==null&&r!==void 0?r:0))}),e(36,"i",35),n(37,"edit"),t()(),e(38,"button",36),u("click",function(){let r=C(s).$implicit,d=_();return S(d.toggleEstado(r))}),f(39,ie,2,0,"span",37)(40,ne,2,0,"span",38),t()()()}if(o&2){let s=i.$implicit,a=i.index,r=z(26),d=_();m(2),p((d.page-1)*d.pageSize+(a+1)),m(2),p(s.id_tipo_documento),m(2),p(s.nro_documento),m(2),p(s.nombre),m(2),p(s.correo),m(2),p(s.telefono),m(2),M("data-bs-target","#modalConjuntos"+a),m(2),l("id","modalConjuntos"+a),m(5),A("Conjuntos de ",s.nombre,""),m(3),l("ngIf",s.nombre_conjunto&&s.nombre_conjunto.length>0)("ngIfElse",r),m(7),p(s.tipo_rol),m(2),p(s.estado),m(2),l("disabled",s.estado==="Inactivo"),m(3),l("ngClass",F(18,Y,s.estado==="Activo",s.estado==="Inactivo"))("disabled",s.estado==="Inactivo"),m(),l("ngIf",s.estado==="Activo"),m(),l("ngIf",s.estado==="Inactivo")}}function re(o,i){o&1&&(e(0,"tr")(1,"td",42),n(2,"No se encontraron administradores."),t()())}var U=(()=>{let i=class i{constructor(a,r){this.router=a,this.adminService=r,this.page=1,this.pageSize=6,this.totalAdmins=0,this.admins=[],this.filteredAdmins=[],this.searchAdmin=""}ngOnInit(){this.refreshAdmins()}crearAdmin(){this.router.navigate(["/administradores/creacion-admin"])}editarAdmin(a){this.router.navigate(["/administradores/creacion-admin",a])}refreshAdmins(){this.adminService.get(T.getAllAdmins).subscribe(a=>{Array.isArray(a.respuesta)?this.admins=a.respuesta:this.admins=[],this.totalAdmins=this.admins.length,this.filterAdmins()})}filterAdmins(){let a=this.searchAdmin.toLowerCase(),r=this.admins.filter(c=>c.nombre.toLowerCase().includes(a)||c.nro_documento.includes(a));this.totalAdmins=r.length;let d=(this.page-1)*this.pageSize;this.filteredAdmins=r.slice(d,d+this.pageSize)}trackById(a,r){return r.id_admin??a}onSearchTermChange(){this.page=1,this.filterAdmins()}toggleEstado(a){a.estado=a.estado==="Activo"?"Inactivo":"Activo",this.adminService.delete(T.deleteAdmin,a.id_admin,a).subscribe({next:r=>{console.log("Estado del administrador actualizado exitosamente:",r),window.location.reload()},error:r=>{console.error("Error al actualizar el estado del administrador:",r),r.status===401?console.error("No autorizado, redirigiendo al login"):console.error("Error no manejado:",r)}})}};i.\u0275fac=function(r){return new(r||i)(y(D),y(v))},i.\u0275cmp=N({type:i,selectors:[["app-administradores"]],decls:48,vars:7,consts:[["noConjuntos",""],[1,"container","py-3"],[1,"abs-center"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"text-center","fs-2","text-primary","mb-4"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-md-center","mb-3"],["type","button",1,"btn","btn-success","mb-3",3,"click"],[1,"material-icons","align-middle","me-1"],[1,"input-group","w-auto"],["type","text","placeholder","Buscar administrador...",1,"form-control",3,"ngModelChange","input","ngModel"],["id","basic-addon1",1,"input-group-text"],[1,"material-icons"],[1,"table-responsive"],[1,"table","table-striped","text-center"],["scope","col"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"d-flex","justify-content-between","p-2"],[3,"pageChange","collectionSize","page","pageSize"],["scope","row"],[1,"d-flex","justify-content-center"],["data-bs-toggle","modal",1,"btn","text-primary"],["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[4,"ngIf","ngIfElse"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"d-flex","justify-content-start"],["title","Editar",1,"btn","btn-warning",2,"font-size","20px","margin-right","5px",3,"click","disabled"],[1,"material-icons","align-middle",2,"font-size","20px","margin-right","5px"],[1,"btn",3,"click","ngClass","disabled"],["class","material-icons","title","Activo",4,"ngIf"],["class","material-icons","title","Inactivo",4,"ngIf"],[4,"ngFor","ngForOf"],["title","Activo",1,"material-icons"],["title","Inactivo",1,"material-icons"],["colspan","10",2,"text-align","center"]],template:function(r,d){r&1&&(b(0,"app-animation")(1,"app-nav"),e(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),n(7,"Administradores"),t(),e(8,"div",6)(9,"button",7),u("click",function(){return d.crearAdmin()}),e(10,"i",8),n(11,"add_circle"),t(),n(12," Crear nuevo administrador "),t(),e(13,"div",9)(14,"input",10),w("ngModelChange",function(g){return I(d.searchAdmin,g)||(d.searchAdmin=g),g}),u("input",function(){return d.onSearchTermChange()}),t(),e(15,"span",11)(16,"i",12),n(17,"search"),t()()()(),e(18,"div",13)(19,"table",14)(20,"thead")(21,"tr")(22,"th",15),n(23,"#"),t(),e(24,"th",15),n(25,"Id_documentos"),t(),e(26,"th",15),n(27,"Numero de documento"),t(),e(28,"th",15),n(29,"Nombre"),t(),e(30,"th",15),n(31,"Correo"),t(),e(32,"th",15),n(33,"Telefono"),t(),e(34,"th",15),n(35,"Conjunto"),t(),e(36,"th",15),n(37,"Rol"),t(),e(38,"th",15),n(39,"Estado"),t(),e(40,"th",15),n(41,"Acciones"),t()()(),e(42,"tbody"),f(43,oe,41,21,"tr",16)(44,re,3,0,"tr",17),t()()(),e(45,"div",18)(46,"ngb-pagination",19),w("pageChange",function(g){return I(d.page,g)||(d.page=g),g}),u("pageChange",function(){return d.refreshAdmins()}),t()()()()()(),b(47,"app-footer")),r&2&&(m(14),E("ngModel",d.searchAdmin),m(29),l("ngForOf",d.filteredAdmins)("ngForTrackBy",d.trackById),m(),l("ngIf",d.filteredAdmins.length===0),m(2),l("collectionSize",d.totalAdmins),E("page",d.page),l("pageSize",d.pageSize))},dependencies:[P,B,V,L,R,$,q,G,H,J],styles:[".abs-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:70vh}.card[_ngcontent-%COMP%]{min-width:90vw}.container[_ngcontent-%COMP%]{padding:1rem}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let o=i;return o})();var ae=[{path:"",component:U}],X=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=x({type:i}),i.\u0275inj=h({imports:[j.forChild(ae),j]});let o=i;return o})();var Ie=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=x({type:i}),i.\u0275inj=h({providers:[v],imports:[W,X,K]});let o=i;return o})();export{Ie as AdministradoresModule};
